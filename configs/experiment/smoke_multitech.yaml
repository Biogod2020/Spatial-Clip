# @package _global_

defaults:
  - override /data: spatial
  - override /model: spatial_clip
  - override /loss: spatial

tags: ["smoke", "multitech", "shards"]

data:
  data_dir: ${paths.data_dir}/processed/hest_v1_multitech_smoke
  dataset_format: shards_v1
  batch_size: 32
  splits:
    train: ["MISC52", "NCBI461", "NCBI759", "NCBI858", "TENX158"]
    val: ["MISC52"]
    test: ["TENX158"]

model:
  net:
    model_name: ViT-B-32
    pretrained: laion2b_s34b_b79k

trainer:
  max_epochs: 2
  limit_train_batches: 1.0
  limit_val_batches: 1.0
  check_val_every_n_epoch: 1

callbacks:
  model_checkpoint:
    monitor: "val/loss"
    mode: "min"
    save_top_k: 1
    save_last: true

save_ckpt: False
